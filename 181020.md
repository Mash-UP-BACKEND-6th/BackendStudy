# 181020 백엔드 스터디

아키텍쳐

### 모노리틱

하나의 서비스가 여러 기능을 담당

### SOA (Service Oriented Architecture)

> 서비스 지향 아키텍쳐

모노리틱을 대체하고자 나왔으나 도태됨 (어댑터 개발 비용이 큼)

ESB에 서비스 1,2,3,4가 붙어있음

각 서비스들은 ESB에 붙기 위해 adapter를 구현해야 함

### MSA

> 쇼핑몰의 경우

기능단위로 서비스를 분리

1. 멤버십
2. 구매
3. 예약구매
4. 주문

#### AWS의 경우

Client(s)  
 -> API Gateway (Authenticate/Authorization 담당)  
 -> 각 서비스로 이동
 
DB는 각 서비스(컴포넌트라고 부르는 듯) 자신에 해당하는 DB외에 다른 컴포넌트들의 DB를 바라보면 안 됨 (토폴로지?)

정보가 필요할 경우 각 컴포넌트별 RESTAPI에 요청. 각 컴포넌트는 자신의 서비스만 정확히 운영하면 됨

실행되고 있는 프로세스에서 부르는 것 보다, 각 서비스별 HTTP통신은 비용이 큼

대체방법으로 자체 프로토콜을 만들거나 RPC를 사용함

HTTP의 단점: 텍스트 프로토콜이라 parsing에 많은 비용이 소모됨

RPC: 이진데이터로 프로토콜을 만듬. parsing이 쉬움

- RPC프로토콜을 쓴다면 API를 호출하는건 기존 HTTP방식과 같나?
- 다른 컴퓨터의 함수를 실행해주는 프로토콜
- REST와는 다르게 서버간 API는 RPC로 구성하는 게 더 효율적
	- 외부 노출은 불가능

MQ - 카프카/rabbitmq

성능상 비동기 처리가 필요할 경우엔 RPC프로토콜조차도 사용 힘듬 -> Queue를 사용

queue를 사용한 데이터처리 -> back pressure관리 (처리하는 서버의 네트워크 상태등을 고려해서 요청 처리)

status컬럼을 사용해서 작업 상태 처리 (Celery고려하면 될듯)

- MSA에서 DB를 따로둔다는건 어떤 공간? 각 DB별로 RDS하나씩? (논리적으로도 가능)
- MSA로 기능을 구성하면 각각이 하나의 장고/스프링 프로젝트가 되는것?


도메인 주도 설계 (Domain driven 설계?) (MSA를 기반으로 나온)

- DDD? 뭐가 유행? 높은 응집도 낮은 결합도?
- 하나의 도메인이 하나의 일만 하도록 구성하는 설계법
	- (예를들면 유저클래스가 아닌 로그인클래스/회원가입클래스 등등으로 구분)

#### Serverless

```
Client(s)  
-> API Gateway  
  -> Lambda1  
  -> Lambda1  
  -> Lambda1  
  -> Lambda1
```

FaaS (Function as a Service)





